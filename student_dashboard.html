<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>StudentVerse - Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#6366f1',
                        secondary: '#8b5cf6',
                    }
                }
            }
        }
    </script>
    <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>

    <script>
    // Your Firebase config here:
    const firebaseConfig = {
        apiKey: "AIzaSyA05Tb71tmAxgbZJnLW9vY5HLQ6IHhjIKs",
        authDomain: "secretvault-25d78.firebaseapp.com",
        projectId: "secretvault-25d78",
        storageBucket: "secretvault-25d78.firebasestorage.app",
        messagingSenderId: "832329392569",
        appId: "1:832329392569:web:4288a14e3c7a59def61668"
    };

    firebase.initializeApp(firebaseConfig);
  const db = firebase.firestore();

  // Hide all course cards first
  document.addEventListener("DOMContentLoaded", () => {
    ["sem5", "sem6", "jsCard", "aimlCard", "cloudCard", "osyCard"].forEach((id) => {
      const card = document.getElementById(id);
      if (card) card.style.display = "none";
    });
  });

  firebase.auth().onAuthStateChanged((user) => {
    if (user) {
      const email = user.email;
      document.getElementById("userEmail").textContent = email;

      db.collection("users").doc(email).get().then((doc) => {
        if (doc.exists) {
          const data = doc.data();
          const userCourses = data.courses || [];

          let count = 0;

          userCourses.forEach((courseId) => {
            const courseCard = document.getElementById(courseId);
            if (courseCard) {
              courseCard.style.display = "block";
              count++;
            }
          });

          document.getElementById("totalCourses").textContent = count+1;
        } else {
          alert("No user data found.");
        }
      }).catch((err) => {
        console.error("Firestore Error:", err);
      });
    } else {
      window.location.href = "index.html";
    }
  });

  function logout() {
    firebase.auth().signOut().then(() => {
      window.location.href = "index.html";
    });
  }
    </script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        
        * {
            font-family: 'Inter', sans-serif;
        }
        
        .course-card {
            transition: all 0.3s ease;
        }
        
        .course-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        }
        
        .progress-bar {
            transition: width 0.8s ease;
        }
        
        .fade-in {
            animation: fadeIn 0.6s ease-in-out;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .stat-card {
            transition: all 0.3s ease;
        }
        
        .stat-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        
        .gradient-text {
            background: linear-gradient(135deg, #6366f1, #8b5cf6);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen">
    <!-- Sticky Header -->
    <header class="sticky top-0 z-50 bg-white shadow-lg border-b border-gray-200">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center">
                    <h1 class="text-2xl font-bold bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent">
                        StudentVerse
                    </h1>
                </div>
                <div class="flex items-center space-x-4">
                    <div class="hidden md:flex items-center space-x-4">
                        <span class="text-gray-600">Welcome back,</span>
                        <span class="text-primary font-medium" id="userEmail">user@example.com</span>
                    </div>
                    <button onclick="logout()" class="bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition duration-300 font-medium">
                        Logout
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <!-- Welcome Section -->
        <section class="mb-12 fade-in">
            <div class="bg-gradient-to-br from-primary via-secondary to-purple-600 text-white rounded-2xl p-8 shadow-xl">
                <div class="flex flex-col md:flex-row justify-between items-start md:items-center">
                    <div>
                        <h2 class="text-3xl md:text-4xl font-bold mb-2">Welcome Back!</h2>
                        <p class="text-xl opacity-90">Ready to continue your learning journey?</p>
                    </div>
                    <div class="mt-6 md:mt-0 text-center">
                        <div class="bg-white bg-opacity-20 rounded-lg p-4 backdrop-blur-sm">
                            <p class="text-sm opacity-80 mb-1">Total Notes</p>
                            <p class="text-2xl font-bold" id="totalCourses">0</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- My Courses Section -->
        <section class="mb-12 fade-in">
            <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-8">
                <h3 class="text-3xl font-bold text-gray-900 mb-4 md:mb-0">My Notes</h3>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8" id="coursesGrid">

                <!-- Course Card 1 -->
                <div id="sem5" style="display: none;" class="course-card bg-white rounded-2xl shadow-xl overflow-hidden" data-status="in-progress">
                    <div class="bg-gradient-to-r from-blue-500 to-purple-600 h-48 flex items-center justify-center relative">
                        <div class="absolute top-4 right-4">
                            <span class="bg-green-500 text-white px-3 py-1 rounded-full text-sm font-medium">
                                In Progress
                            </span>
                        </div>
                        <div class="text-white text-center">
                            <svg class="w-16 h-16 mx-auto mb-4" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                            <h4 class="text-2xl font-bold">SEM 5</h4>
                        </div>
                    </div>
                    <div class="p-6">
                        <h4 class="text-xl font-bold text-gray-900 mb-2">Semester 5 Essentials</h4>
                        <p class="text-gray-600 mb-4">Explore the core of tech in Semester 5 with notes on OS, Cloud Computing, and AI/ML basics. Ideal for building both practical and theoretical foundations.</p>
                        <div class="mb-4">
                            <div class="flex justify-between items-center mb-2">
                                <span class="text-sm font-medium text-gray-700">Progress</span>
                                <span class="text-sm font-medium text-green-600">50%</span>
                            </div>
                            <div class="w-full bg-gray-200 rounded-full h-2">
                                <div class="progress-bar bg-green-500 h-2 rounded-full" style="width: 50%"></div>
                            </div>
                        </div>
                        <button onclick="continueCourse('sem5')" class="w-full bg-primary text-white py-2 rounded-lg hover:bg-indigo-600 transition duration-300 font-medium">
                            Start Learning
                        </button>
                    </div>
                </div>

                <!-- Course Card 2 -->
                <div id="sem6" style="display: none;" class="course-card bg-white rounded-2xl shadow-xl overflow-hidden" data-status="in-progress">
                    <div class="bg-gradient-to-r from-green-500 to-teal-600 h-48 flex items-center justify-center relative">
                        <div class="absolute top-4 right-4">
                            <span class="bg-blue-500 text-white px-3 py-1 rounded-full text-sm font-medium">
                                In Progress
                            </span>
                        </div>
                        <div class="text-white text-center">
                            <svg class="w-16 h-16 mx-auto mb-4" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z"></path>
                            </svg>
                            <h4 class="text-2xl font-bold">SEM 6</h4>
                        </div>
                    </div>
                    <div class="p-6">
                        <h4 class="text-xl font-bold text-gray-900 mb-2">Complete 6 Semester</h4>
                        <p class="text-gray-600 mb-4">Level up with Semester 6! Dive into Mobile App Development, Advanced AI/ML Algorithms, Big Data, Network Security, and Management concepts ‚Äî perfect for future-ready developers and tech leaders.</p>
                        <div class="mb-4">
                            <div class="flex justify-between items-center mb-2">
                                <span class="text-sm font-medium text-gray-700">Progress</span>
                                <span class="text-sm font-medium text-blue-600">50%</span>
                            </div>
                            <div class="w-full bg-gray-200 rounded-full h-2">
                                <div class="progress-bar bg-blue-500 h-2 rounded-full" style="width: 50%"></div>
                            </div>
                        </div>
                        <button onclick="continueCourse('sem6')" class="w-full bg-primary text-white py-2 rounded-lg hover:bg-indigo-600 transition duration-300 font-medium">
                            Start Learning
                        </button>
                    </div>
                </div>

                <!-- Course Card Free -->
                <div id="free" class="course-card bg-white rounded-2xl shadow-xl overflow-hidden" data-status="in-progress">
                    <div class="bg-gradient-to-r from-blue-500 to-purple-600 h-48 flex items-center justify-center relative">
                        <div class="absolute top-4 right-4">
                            <span class="bg-green-500 text-white px-3 py-1 rounded-full text-sm font-medium">
                                In Progress
                            </span>
                        </div>
                        <div class="text-white text-center">
                            <svg class="w-16 h-16 mx-auto mb-4" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                            <h4 class="text-2xl font-bold">FREE !!!</h4>
                        </div>
                    </div>
                    <div class="p-6">
                        <h4 class="text-xl font-bold text-gray-900 mb-2">Free Content</h4>
                        <p class="text-gray-600 mb-4">üéÅ Bonus: Access free study material, sample notes, and preview content</p>
                        <div class="mb-4">
                            <div class="flex justify-between items-center mb-2">
                                <span class="text-sm font-medium text-gray-700">Progress</span>
                                <span class="text-sm font-medium text-green-600">50%</span>
                            </div>
                            <div class="w-full bg-gray-200 rounded-full h-2">
                                <div class="progress-bar bg-green-500 h-2 rounded-full" style="width: 50%"></div>
                            </div>
                        </div>
                        <button onclick="continueCourse('free')" class="w-full bg-primary text-white py-2 rounded-lg hover:bg-indigo-600 transition duration-300 font-medium">
                            Start Learning
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Courses Section -->
        <section id="courses" class="py-20">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="text-center mb-16">
                    <h3 class="text-4xl font-bold text-gray-900 mb-4">Featured Notes</h3>
                    <p class="text-xl text-gray-600 max-w-2xl mx-auto">
                        Comprehensive study materials and resources for your academic success
                    </p>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                    <!-- Course Card 1 -->
                    <div class="bg-white rounded-2xl shadow-xl hover:shadow-2xl transition duration-300 overflow-hidden group">
                        <div class="bg-gradient-to-r from-blue-500 to-purple-600 h-48 flex items-center justify-center">
                            <div class="text-white text-center">
                                <svg class="w-16 h-16 mx-auto mb-4" fill="currentColor" viewBox="0 0 20 20">
                                    <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                </svg>
                                <h4 class="text-2xl font-bold">SEM 5th</h4>
                            </div>
                        </div>
                        <div class="p-6">
                            <h4 class="text-2xl font-bold text-gray-900 mb-3">Semester 5 Essentials</h4>
                            <p class="text-gray-600 mb-4">Explore the core of tech in Semester 5 with notes on OS, Cloud Computing, JavaScript, AI/ML basics, and Environmental Studies. Ideal for building both practical and theoretical foundations.</p>
                            <div class="flex items-center justify-between">
                                <span class="text-3xl font-bold text-primary">‚Çπ499</span>
                                <button   
                                    data-course="sem5"
                                    onclick="handleBuyNow('sem5', 'Semester 5 Essentials')" class="bg-primary text-white px-6 py-2 rounded-full hover:bg-indigo-600 transition duration-300 font-medium">
                                    Buy Now
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Course Card 2 -->
                    <div class="bg-white rounded-2xl shadow-xl hover:shadow-2xl transition duration-300 overflow-hidden group">
                        <div class="bg-gradient-to-r from-green-500 to-teal-600 h-48 flex items-center justify-center">
                            <div class="text-white text-center">
                                <svg class="w-16 h-16 mx-auto mb-4" fill="currentColor" viewBox="0 0 20 20">
                                    <path d="M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z"></path>
                                </svg>
                                <h4 class="text-2xl font-bold">SEM 6th</h4>
                            </div>
                        </div>
                        <div class="p-6">
                            <h4 class="text-2xl font-bold text-gray-900 mb-3">Complete 6 Semester</h4>
                            <p class="text-gray-600 mb-4">Level up with Semester 6! Dive into Mobile App Development, Advanced AI/ML Algorithms, Big Data, Network Security, and Management concepts ‚Äî perfect for future-ready developers and tech leaders.</p>
                            <div class="flex items-center justify-between">
                                <span class="text-3xl font-bold text-primary">‚Çπ499</span>
                                <button
                                      data-course="sem6" 
                                    onclick="handleBuyNow('sem6', 'Complete Semester 6')" class="bg-primary text-white px-6 py-2 rounded-full hover:bg-indigo-600 transition duration-300 font-medium">
                                    Buy Now
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Course Card 3 -->
                    <div class="bg-white rounded-2xl shadow-xl hover:shadow-2xl transition duration-300 overflow-hidden group">
                        <div class="bg-gradient-to-r from-blue-500 to-purple-600 h-48 flex items-center justify-center">
                            <div class="text-white text-center">
                                <svg class="w-16 h-16 mx-auto mb-4" fill="currentColor" viewBox="0 0 20 20">
                                    <path d="M20 12v7a2 2 0 01-2 2H6a2 2 0 01-2-2v-7m16 0H4m16 0a2 2 0 00-2-2h-2.586a1 1 0 01-.707-.293l-1.414-1.414a1 1 0 00-1.414 0L10 9.707a1 1 0 01-.707.293H6a2 2 0 00-2 2m4-5h.01M14 7h.01"></path>
                                </svg>
                                <h4 class="text-2xl font-bold">FREE !!!</h4>
                            </div>
                        </div>
                        <div class="p-6">
                            <h4 class="text-2xl font-bold text-gray-900 mb-3">Free Content</h4>
                            <p class="text-gray-600 mb-4">üéÅ Bonus: Access free study material, sample notes, and preview content</p>
                            <div class="flex items-center justify-between">
                                <span class="text-3xl font-bold text-primary">FREE</span>
                                <button disabled 
                                    data-course="sem5"
                                    class="bg-gray-400 text-white px-6 py-2 rounded-full cursor-not-allowed transition duration-300 font-medium">
                                    ‚úî Purchased
                                </button>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </section>

        <!-- Quick Actions -->
        <section class="mb-12 fade-in">
            <h3 class="text-2xl font-bold text-gray-900 mb-6">Quick Actions</h3>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                <div class="bg-white rounded-xl p-6 shadow-lg hover:shadow-xl transition duration-300 cursor-pointer" onclick="showDownloads()">
                    <div class="flex items-center justify-between mb-4">
                        <h4 class="text-lg font-semibold text-gray-900">Downloads</h4>
                        <svg class="w-6 h-6 text-primary" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                        </svg>
                    </div>
                    <p class="text-gray-600">Access your downloaded materials</p>
                </div>
                
                <div class="bg-white rounded-xl p-6 shadow-lg hover:shadow-xl transition duration-300 cursor-pointer" onclick="showCertificates()">
                    <div class="flex items-center justify-between mb-4">
                        <h4 class="text-lg font-semibold text-gray-900">Certificates</h4>
                        <svg class="w-6 h-6 text-primary" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M6 2a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V7.414A2 2 0 0015.414 6L12 2.586A2 2 0 0010.586 2H6zm5 6a1 1 0 10-2 0v3.586l-1.293-1.293a1 1 0 10-1.414 1.414l3 3a1 1 0 001.414 0l3-3a1 1 0 00-1.414-1.414L11 11.586V8z" clip-rule="evenodd"></path>
                        </svg>
                    </div>
                    <p class="text-gray-600">View your earned certificates</p>
                </div>
                
                <div class="bg-white rounded-xl p-6 shadow-lg hover:shadow-xl transition duration-300 cursor-pointer" onclick="showSettings()">
                    <div class="flex items-center justify-between mb-4">
                        <h4 class="text-lg font-semibold text-gray-900">Settings</h4>
                        <svg class="w-6 h-6 text-primary" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z" clip-rule="evenodd"></path>
                        </svg>
                    </div>
                    <p class="text-gray-600">Manage your preferences</p>
                </div>
                
                <div class="bg-white rounded-xl p-6 shadow-lg hover:shadow-xl transition duration-300 cursor-pointer" onclick="showSupport()">
                    <div class="flex items-center justify-between mb-4">
                        <h4 class="text-lg font-semibold text-gray-900">Support</h4>
                        <svg class="w-6 h-6 text-primary" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-3a1 1 0 00-.867.5 1 1 0 11-1.731-1A3 3 0 0113 8a3.001 3.001 0 01-2 2.83V11a1 1 0 11-2 0v-1a1 1 0 011-1 1 1 0 100-2zm0 8a1 1 0 100-2 1 1 0 000 2z" clip-rule="evenodd"></path>
                        </svg>
                    </div>
                    <p class="text-gray-600">Get help and support</p>
                </div>
            </div>
        </section>
    </main>

    <!-- Payment Modal -->
    <div id="paymentModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
        <div class="bg-white p-6 rounded-lg shadow-lg w-full max-w-md relative">
            <button onclick="closePaymentModal()" class="absolute top-2 right-2 text-gray-400 hover:text-black text-xl">&times;</button>
            <h2 class="text-xl font-semibold mb-2" id="paymentCourseTitle">Buy Course</h2>
            <p class="text-gray-600 mb-4">Scan the QR below to pay. You'll get access within 24 hours.</p>
            <img src="images/qr.jpg" alt="QR Code" class="w-40 mx-auto mb-4" />
                <div class="text-center text-sm text-gray-500 mb-2">Timer: <span id="paymentTimer">10:00</span></div>
            <button onclick="confirmPayment()" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 w-full">I've Paid</button>
        </div>
    </div>

    <script>

        // Filter courses
        function filterCourses(filter) {
            const courses = document.querySelectorAll('.course-card');
            const buttons = document.querySelectorAll('.filter-btn');
            
            // Reset button styles
            buttons.forEach(btn => {
                btn.classList.remove('bg-primary', 'text-white');
                btn.classList.add('bg-gray-200', 'text-gray-700', 'hover:bg-gray-300');
            });
            
            // Highlight active button
            const activeButton = document.getElementById(`filter${filter.charAt(0).toUpperCase() + filter.slice(1).replace('-', '')}`);
            if (activeButton) {
                activeButton.classList.remove('bg-gray-200', 'text-gray-700', 'hover:bg-gray-300');
                activeButton.classList.add('bg-primary', 'text-white');
            }
            
            // Show/hide courses
            courses.forEach(course => {
                if (filter === 'all') {
                    course.style.display = 'block';
                } else {
                    const status = course.getAttribute('data-status');
                    if (status === filter) {
                        course.style.display = 'block';
                    } else {
                        course.style.display = 'none';
                    }
                }
            });
        }

        // Continue course 
        function continueCourse(courseId) {
            // In a real app, this would redirect to the course content
            sessionStorage.setItem("access-" + courseId, "true");
            alert(`Continuing ${courseId.toUpperCase()} course...`);
            window.location.href = courseId+ `.html`;

        }

        // Quick actions
        function showDownloads() {
            alert('Downloads section - This would show downloadable materials');
        }

        function showCertificates() {
            alert('Certificates section - This would show earned certificates');
        }

        function showSettings() {
            alert('Settings section - This would show user preferences');
        }

        function showSupport() {
            alert('Support section - This would show help and support options');
        }

        // Logout function
        function logout() {
            if (confirm('Are you sure you want to logout?')) {
                // In a real app, this would clear session and redirect to login
                alert('Logging out...');
                window.location.href = 'index.html';
            }
        }

        // Initialize dashboard when page loads
        document.addEventListener('DOMContentLoaded', function() {
            initializeDashboard();
        });

        let selectedCourseId = null;
        let paymentTimer = null;

        function openPaymentModal(courseId, courseTitle) {
        selectedCourseId = courseId;
        document.getElementById('paymentCourseTitle').innerText = "Buy " + courseTitle;
        document.getElementById('paymentModal').classList.remove('hidden');
        startPaymentTimer();
        }

        function closePaymentModal() {
        clearInterval(paymentTimer);
        document.getElementById('paymentModal').classList.add('hidden');
        document.getElementById('paymentTimer').textContent = "10:00";
        }

        function confirmPayment() {
        alert("Thanks! We'll verify and give access within 24 hours.");
        closePaymentModal();
        }

        function startPaymentTimer() {
        let time = 600;
        const timerEl = document.getElementById("paymentTimer");
        paymentTimer = setInterval(() => {
        let min = Math.floor(time / 60);
        let sec = time % 60;
        timerEl.textContent = `${min}:${sec < 10 ? '0' + sec : sec}`;
        time--;
        if (time < 0) clearInterval(paymentTimer);
        }, 1000);
        }

        // Example handler (bind this to Buy Now buttons)
        function handleBuyNow(courseId, courseName) {
        const user = firebase.auth().currentUser;
        openPaymentModal(courseId, courseName);
        }
    </script>
    <script>
    firebase.auth().onAuthStateChanged(function(user) {
        if (user) {
        const db = firebase.firestore();
        const email = user.email;

        db.collection("users").doc(email).get().then((doc) => {
            if (doc.exists) {
            const data = doc.data();
            const purchased = data.courses || [];

            // Loop through all Buy Now buttons in courseGrid
            purchased.forEach(courseId => {
                const btn = document.querySelector(`button[data-course='${courseId}']`);
                if (btn) {
                btn.textContent = "‚úî Purchased";
                btn.disabled = true;
                btn.classList.add("bg-gray-400", "cursor-not-allowed");
                btn.classList.remove("bg-primary", "hover:bg-indigo-600");
                }
            });
            }
        }).catch((err) => {
            console.error("Error getting user purchases:", err);
        });
        }
    });
    </script>
</body>
</html>